<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmed - Soothing Bar</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <img src="{{ url_for('static', filename='images/logo.svg') }}" alt="Soothing Bar Logo">
        <h1>Order Confirmed!</h1>
    </header>
    <nav>
        <a href="{{ url_for('home') }}"><i class="fas fa-home"></i> Home</a>
        <a href="{{ url_for('products') }}"><i class="fas fa-shopping-bag"></i> Products</a>
        <a href="{{ url_for('contact') }}"><i class="fas fa-envelope"></i> Contact</a>
        <a href="{{ url_for('view_cart') }}"><i class="fas fa-shopping-cart"></i> Cart ({{ cart_count }})</a>
        {% if session.user_logged_in or session.admin_logged_in %}
            <a href="{{ url_for('logout') }}"><i class="fas fa-sign-out-alt"></i> Logout ({{ session.username }})</a>
        {% else %}
            <a href="{{ url_for('signup') }}"><i class="fas fa-user-plus"></i> Sign Up</a>
            <a href="{{ url_for('login') }}"><i class="fas fa-sign-in-alt"></i> Log In</a>
        {% endif %}
    </nav>
    <div class="container">
        <div style="max-width: 600px; margin: 0 auto; background: white; padding: 40px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 60px; color: #4CAF50; margin-bottom: 20px;">✓</div>
            <h2 style="color: #4CAF50; margin-bottom: 20px;">Thank you for your order!</h2>
            <p style="font-size: 18px; margin-bottom: 30px;">Your order has been successfully placed.</p>
            
            {% if order %}
            <div style="background: #f5f5f5; padding: 20px; border-radius: 5px; text-align: left; margin-bottom: 30px;">
                <h3 style="color: #b58a65; margin-top: 0;">Order Details</h3>
                <p><strong>Order ID:</strong> {{ order.order_id|default('N/A') }}</p>
                {% set order_items = order.get('items', []) %}
                {% if order_items %}
                    {# New format: Multiple items #}
                    <p><strong>Items:</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        {% set total_qty = 0 %}
                        {% for item in order_items %}
                        <li style="margin-bottom: 8px;">
                            {{ item.product_name|default('Unknown') }} - Quantity: {{ item.quantity|default(0) }} × ₱{{ "%.2f"|format(item.unit_price|default(0)) }} = ₱{{ "%.2f"|format(item.total_price|default(0)) }}
                        </li>
                        {% set total_qty = total_qty + (item.quantity|default(0)|int) %}
                        {% endfor %}
                    </ul>
                    <p><strong>Total Quantity:</strong> {{ total_qty }}</p>
                {% else %}
                    {# Old format: Single product (backward compatibility) #}
                    <p><strong>Product:</strong> {{ order.product_name|default('N/A') }}</p>
                    <p><strong>Quantity:</strong> {{ order.quantity|default(0) }}</p>
                {% endif %}
                <p><strong>Total Amount:</strong> ₱{{ "%.2f"|format(order.total_price|default(0)) }}</p>
                <p><strong>Payment Method:</strong> {{ order.payment_method|default('N/A') }}</p>
                <p><strong>Status:</strong> {{ order.status|default('Pending') }}</p>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-bottom: 30px; text-align: left;">
                <p style="margin: 0;"><strong>Shipping Address:</strong></p>
                <p style="margin: 5px 0;">{{ order.customer_name|default('') }}</p>
                <p style="margin: 5px 0;">{{ order.shipping_address|default('') }}</p>
                <p style="margin: 5px 0;">{{ order.city|default('') }}, {{ order.postal_code|default('') }}</p>
                <p style="margin: 5px 0;">Email: {{ order.email|default('') }}</p>
                <p style="margin: 5px 0;">Phone: {{ order.phone|default('') }}</p>
            </div>
            {% else %}
            <div style="background: #fff3cd; padding: 20px; border-radius: 5px; margin-bottom: 30px;">
                <p style="color: #856404;">Order information is not available.</p>
            </div>
            {% endif %}
            
            <p style="color: #666; margin-bottom: 30px;">We will send you an email confirmation shortly. You will be contacted for delivery arrangements.</p>
            
            <div style="display: flex; gap: 15px; justify-content: center;">
                <a href="{{ url_for('products') }}" style="display: inline-block; padding: 12px 30px; background: #b58a65; color: white; text-decoration: none; border-radius: 5px;">Continue Shopping</a>
                <a href="{{ url_for('home') }}" style="display: inline-block; padding: 12px 30px; background: #f5f5f5; color: #333; text-decoration: none; border-radius: 5px;">Go to Home</a>
            </div>
        </div>
    </div>
    <footer>
        <p>&copy; 2025 Soothing Bar Shop. All rights reserved.</p>
    </footer>
</body>
</html>

